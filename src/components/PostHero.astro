---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

interface Props {
  src?: string | ImageMetadata;
  alt?: string;
}

const { src, alt } = Astro.props as Props;
const isMetadata = typeof src === 'object' && src !== null && 'src' in (src as any);
---

{src && (
  <figure class="post-hero">
    {isMetadata ? (
      <Image src={src as ImageMetadata} alt={alt ?? ''} sizes="(max-width: 900px) 100vw, 960px" />
    ) : (
      <img src={src as string} alt={alt ?? ''} loading="lazy" decoding="async" />
    )}
  </figure>
)}
